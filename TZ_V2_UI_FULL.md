# ============================================================
# ะขะะฅะะะงะะกะะะ ะะะะะะะ: V2 UI ะดะปั Bybit SHORT Scanner
# ============================================================
# ะะตััะธั: 1.0
# ะะฐัะฐ: 03.01.2026
# ============================================================

## ะะะฉะะ ะะะะกะะะะ ะะะะะะขะ

Bybit SHORT Scanner โ ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะฟะพะธัะบะฐ ะผะพะฝะตั ะฝะฐ ะบัะธะฟัะพะฑะธัะถะต Bybit, 
ะฟะพะดัะพะดััะธั ะดะปั ะพัะบัััะธั SHORT-ะฟะพะทะธัะธะน. ะะฐะฟะธัะฐะฝะพ ะฝะฐ Python + PySide6 (Qt).

ะัะพะตะบั ะฟะตัะตััะป ะฝะฐ **ะผะพะดัะปัะฝัั ะฐััะธัะตะบัััั**:
- ะะฐะฝััะต: ะพะดะธะฝ ะผะพะฝะพะปะธัะฝัะน ัะฐะนะป `auto-short_v095_with_trainer_bridge.py` (133 KB)
- ะกะตะนัะฐั: ัะฐะทะดะตะปะตะฝะธะต ะฝะฐ ะผะพะดัะปะธ (main.py, core/, ui/, strategies/, workers/)

---

## ะกะขะะฃะะขะฃะะ ะะะะะะขะ

```
C:\Pythone\Log_Short\
โ
โโโ _Start.bat              # ะขะพัะบะฐ ะทะฐะฟััะบะฐ (ะฒัะทัะฒะฐะตั _Start.py)
โโโ _Start.py               # ะะฐะฟััะบะฐะตั main.py
โโโ main.py                 # โญ ะฆะะะขะะะะฌะะซะ ะคะะะ โ ะณะปะฐะฒะฝะพะต ะพะบะฝะพ ัะบะฐะฝะตัะฐ
โ
โโโ core/                   # ะฏะดัะพ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ __init__.py
โ   โโโ config.py           # ะะฐะทะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั
โ   โโโ config_v2.py        # โญ V2 ะบะพะฝัะธะณััะฐัะธั (USE_NEW_UI, ะธะฝัะตัะฒะฐะปั)
โ   โโโ engine_v2.py        # โญ V2 ะดะฒะธะถะพะบ (ScanState, ัะฐะนะผะตัั ััะพะฒะฝะตะน)
โ   โโโ types.py            # ะขะธะฟั ะดะฐะฝะฝัั (CoinRow)
โ   โโโ bridge.py           # ะกะฒัะทั ั Trainer
โ   โโโ bybit_client.py     # API Bybit
โ   โโโ gates.py            # ะะพะณะธะบะฐ ะณะตะนัะพะฒ (G0, G1, G2)
โ   โโโ ...
โ
โโโ ui/                     # ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะธะฝัะตััะตะนั
โ   โโโ __init__.py
โ   โโโ styles.py           # ะกัะธะปะธ Qt
โ   โโโ dialogs.py          # ะะธะฐะปะพะณะพะฒัะต ะพะบะฝะฐ
โ   โโโ chart_window.py     # ะะบะฝะพ ะณัะฐัะธะบะฐ
โ   โโโ table_headers_v2.py # โญ V2 ะทะฐะณะพะปะพะฒะบะธ ั ะฟัะพะณัะตัั-ะฑะฐัะฐะผะธ
โ
โโโ strategies/             # ะกััะฐัะตะณะธะธ ะพัะฑะพัะฐ
โ   โโโ __init__.py
โ   โโโ base_strategy.py
โ   โโโ short_after_pump_v2.py  # V2 ัััะฐัะตะณะธั
โ
โโโ workers/                # ะคะพะฝะพะฒัะต ะฟะพัะพะบะธ
โ   โโโ __init__.py
โ   โโโ scanner_worker.py   # ะะพัะบะตั ัะบะฐะฝะธัะพะฒะฐะฝะธั
โ
โโโ auto-short_v095_with_trainer_bridge.py  # ะกัะฐััะน ะผะพะฝะพะปะธั (ะฝะต ะธัะฟะพะปัะทัะตััั)
```

---

## ะฆะะะขะะะะฌะะซะ ะคะะะ: main.py

**main.py** โ ััะพ ะณะปะฐะฒะฝัะน ัะฐะนะป ะฟัะธะปะพะถะตะฝะธั, ะบะพัะพััะน:

1. **ะกะพะทะดะฐัั ะณะปะฐะฒะฝะพะต ะพะบะฝะพ** (class MainWindow)
2. **ะกะพะดะตัะถะธั ะฒะตัั UI**: ัะฐะฑะปะธัั TOP200 ะธ ะะฐะฝะดะธะดะฐัั, ะบะฝะพะฟะบะธ, ะผะตัะบะธ
3. **ะฃะฟัะฐะฒะปัะตั ัะฐะนะผะตัะฐะผะธ**: 
   - `_tick_full_countdown()` โ ัะฐะนะผะตั ะฟะพะปะฝะพะณะพ ะฟะตัะตััััะฐ (120 ัะตะบ)
   - `_tick_cand_countdown()` โ ัะฐะนะผะตั ะพะฑะฝะพะฒะปะตะฝะธั ะบะฐะฝะดะธะดะฐัะพะฒ (5 ัะตะบ)
4. **ะะฐะฟััะบะฐะตั ะฒะพัะบะตัั** ะดะปั ัะพะฝะพะฒะพะณะพ ัะบะฐะฝะธัะพะฒะฐะฝะธั
5. **ะะพะปะถะตะฝ ะธะฝัะตะณัะธัะพะฒะฐัั V2 UI** โ ะฟัะพะณัะตัั-ะฑะฐัั ะฒะผะตััะพ ะฟัะพัััั ัะฐะนะผะตัะพะฒ

### ะะปััะตะฒัะต ัะปะตะผะตะฝัั main.py ะดะปั V2:

```python
# ะะตัะบะธ ะบะพัะพััะต ะฝัะถะฝะพ ะพะฑะฝะพะฒะปััั V2 ะบะพะฝัะตะฝัะพะผ:
self.lbl_full_timer    # "ะะพ ะฟะตัะตััััะฐ: 120 ัะตะบ" โ V2 ะฟัะพะณัะตัั-ะฑะฐัั
self.lbl_cand_timer    # "ะะพ ะพะฑะฝะพะฒะปะตะฝะธั: 5 ัะตะบ" โ V2 ััะฐัััั

# ะะตัะพะด ะบะพัะพััะน ะฒัะทัะฒะฐะตััั ะบะฐะถะดัั ัะตะบัะฝะดั:
def _tick_full_countdown(self):
    # ะะดะตัั ะดะพะปะถะตะฝ ะฒัะทัะฒะฐัััั _update_v2_ui()
    
# ะะพะฒัะน ะผะตัะพะด V2:
def _update_v2_ui(self):
    # ะะฑะฝะพะฒะปัะตั ะฟัะพะณัะตัั-ะฑะฐัั ัะตัะตะท HeaderStateManager
```

---

## ะคะะะะซ V2 (ะจะะ 1 โ ะฃะกะขะะะะะะะะซ)

### 1. core/config_v2.py
**ะะฐะทะฝะฐัะตะฝะธะต**: ะะพะฝัะธะณััะฐัะธั V2 ัะธััะตะผั

```python
USE_NEW_UI = True                    # ะคะปะฐะณ ะฒะบะปััะตะฝะธั V2 UI
SCAN_LEVEL1_INTERVAL_SEC = 300       # ะะพะปะฝัะน ะฟะตัะตัััั: 5 ะผะธะฝัั
SCAN_LEVEL2_INTERVAL_SEC = 30        # ะะฑะฝะพะฒะปะตะฝะธะต ัะตะฝ: 30 ัะตะบ
SCAN_LEVEL3_INTERVAL_SEC = 10        # ะะตัะตะบัะพั ะฟะฐะผะฟะพะฒ: 10 ัะตะบ
CANDIDATES_REFRESH_SEC = 10          # ะะฝะฐะปะธะท ะบะฐะฝะดะธะดะฐัะพะฒ: 10 ัะตะบ
# + ัะฒะตัะฐ ััะฐัััะพะฒ, ะฟะพัะพะณะธ ะบัะธัะตัะธะตะฒ
```

### 2. core/engine_v2.py
**ะะฐะทะฝะฐัะตะฝะธะต**: ะะฒะธะถะพะบ V2 โ ัะพััะพัะฝะธะต ัะบะฐะฝะตัะฐ, ัะฐะนะผะตัั

```python
@dataclass
class ScanState:
    level1_remaining_sec: int = 0    # ะกะตะบัะฝะด ะดะพ ะฟะพะปะฝะพะณะพ ะฟะตัะตััััะฐ
    level2_remaining_sec: int = 0    # ะกะตะบัะฝะด ะดะพ ะพะฑะฝะพะฒะปะตะฝะธั ัะตะฝ
    level3_remaining_sec: int = 0    # ะกะตะบัะฝะด ะดะพ ะดะตัะตะบัะพัะฐ
    level1_in_progress: bool = False # ะะดัั ะฟะตัะตัััั?
    # ...

def get_scan_state() -> ScanState:   # ะะพะปััะธัั ัะพััะพัะฝะธะต
def update_scan_timers():            # ะะฑะฝะพะฒะธัั ัะฐะนะผะตัั
```

### 3. ui/table_headers_v2.py
**ะะฐะทะฝะฐัะตะฝะธะต**: ะะตะฝะตัะฐัะธั V2 ะทะฐะณะพะปะพะฒะบะพะฒ ั ะฟัะพะณัะตัั-ะฑะฐัะฐะผะธ

```python
class HeaderStateManager:
    # ะะตัะพะดั ะพะฑะฝะพะฒะปะตะฝะธั ะดะฐะฝะฝัั:
    def update_level_timers(level1_remaining, level2_remaining, level3_remaining, candidates_remaining)
    def update_counts(selected, classic, pump_5m, pump_1m, combo)
    def update_status_counts(watch, interest, ready, entry)
    
    # ะะตัะพะดั ะณะตะฝะตัะฐัะธะธ ัะตะบััะฐ:
    def get_table1_header_text() -> str   # ะะปั TOP200
    def get_table2_header_text() -> str   # ะะปั ะะฐะฝะดะธะดะฐัะพะฒ

def get_header_manager() -> HeaderStateManager  # ะะปะพะฑะฐะปัะฝัะน singleton
```

### 4. strategies/short_after_pump_v2.py
**ะะฐะทะฝะฐัะตะฝะธะต**: V2 ัััะฐัะตะณะธั ะพัะฑะพัะฐ ะผะพะฝะตั (ะฝะพะฒัะต ะบัะธัะตัะธะธ)

---

## ะงะขะ ะกะะะะะะ (ะจะะ 1 + ะจะะ 2)

### โ ะจะฐะณ 1: ะฃััะฐะฝะพะฒะบะฐ V2 ะผะพะดัะปะตะน
- [x] ะกะพะทะดะฐะฝั ัะฐะนะปั: config_v2.py, engine_v2.py, table_headers_v2.py, short_after_pump_v2.py
- [x] ะคะฐะนะปั ัััะฐะฝะพะฒะปะตะฝั ะฒ ัะพะพัะฒะตัััะฒัััะธะต ะฟะฐะฟะบะธ
- [x] ะะพะดัะปะธ ะธะผะฟะพััะธัััััั ะฑะตะท ะพัะธะฑะพะบ

### โ ะจะฐะณ 2: ะะฝัะตะณัะฐัะธั V2 ะฒ main.py
- [x] ะะพะฑะฐะฒะปะตะฝั ะธะผะฟะพััั V2 ะผะพะดัะปะตะน
- [x] ะะพะฑะฐะฒะปะตะฝะฐ ะฟะตัะตะผะตะฝะฝะฐั V2_AVAILABLE
- [x] ะกะพะทะดะฐะฝ ะผะตัะพะด _update_v2_ui()
- [x] ะะตัะพะด ะฒัะทัะฒะฐะตััั ะฒ _tick_full_countdown()
- [x] ะะพะฑะฐะฒะปะตะฝะฐ ััะฐััะธัะพะฒะบะฐ [TRACE-V2]

---

## ะขะะะฃะฉะะ ะกะะะะะะกะขะ

### ๐ด ะัะพะฑะปะตะผะฐ: ะะตัะพะพัะฒะตัััะฒะธะต API

ะัะธ ะธะฝัะตะณัะฐัะธะธ ะฒััะฒะธะปะธัั ะฝะตัะพะพัะฒะตัััะฒะธั ะผะตะถะดั ัะตะผ, ะบะฐะบ main.py ะฒัะทัะฒะฐะตั ะผะตัะพะดั V2,
ะธ ัะตะผ, ะบะฐะบ ะพะฝะธ ัะตะฐะปัะฝะพ ะฝะฐะทัะฒะฐัััั ะฒ V2 ะผะพะดัะปัั:

| main.py ะฒัะทัะฒะฐะป | ะะตะฐะปัะฝะพะต ะธะผั ะฒ V2 |
|-----------------|-------------------|
| `scan_state.get('level1_countdown')` | `scan_state.level1_remaining_sec` |
| `header_mgr.update_timers()` | `header_mgr.update_level_timers()` |
| `header_mgr.update_criteria_counts()` | `header_mgr.update_counts()` |
| `header_mgr.get_top200_header_text()` | `header_mgr.get_table1_header_text()` |
| `header_mgr.get_candidates_header_text()` | `header_mgr.get_table2_header_text()` |

### ๐ด ะัะพะฑะปะตะผะฐ: ScanState โ dataclass, ะฝะต dict

`get_scan_state()` ะฒะพะทะฒัะฐัะฐะตั ะพะฑัะตะบั `ScanState` (dataclass), ะฐ ะฝะต ัะปะพะฒะฐัั.
ะัะถะฝะพ ะพะฑัะฐัะฐัััั ะบ ะฐััะธะฑััะฐะผ ะฝะฐะฟััะผัั:
- โ `scan_state.get('level1_countdown')`
- โ `scan_state.level1_remaining_sec`

### ๐ก ะัะพะฑะปะตะผะฐ: ะกัะฐััะน ะบะพะด ะฟะตัะตะทะฐะฟะธััะฒะฐะป V2

ะะพัะปะต ะฒัะทะพะฒะฐ V2 ะพะฑะฝะพะฒะปะตะฝะธั, ััะฐััะน ะบะพะด ะฒ `_tick_full_countdown()` ะฟะตัะตะทะฐะฟะธััะฒะฐะป
ะผะตัะบั ะพะฑัะฐัะฝะพ ะฝะฐ "ะะพ ะฟะตัะตััััะฐ: X ัะตะบ". ะะตัะตะฝะพ ะดะพะฑะฐะฒะปะตะฝะธะตะผ `return` ะฟะพัะปะต V2.

---

## ะงะขะ ะะฃะะะ ะกะะะะะขะฌ

### ๐ฏ ะะตะผะตะดะปะตะฝะฝะพ: ะัะพะฒะตัะธัั ะฟะพัะปะตะดะฝะตะต ะธัะฟัะฐะฒะปะตะฝะธะต

ะะพัะปะตะดะฝะธะน main.py (main_v2_fixed2.zip) ัะพะดะตัะถะธั ะธัะฟัะฐะฒะปะตะฝะธะต:
```python
# ะัะปะพ (ะพัะธะฑะบะฐ):
scan_state.get('level1_countdown')

# ะกัะฐะปะพ (ะฟัะฐะฒะธะปัะฝะพ):
scan_state.level1_remaining_sec
```

**ะะตะนััะฒะธะต**: ะะฐะผะตะฝะธัั main.py, ะฟะตัะตะทะฐะฟัััะธัั ัะบะฐะฝะตั, ะฟัะพะฒะตัะธัั ะบะพะฝัะพะปั ะฝะฐ ะพัะธะฑะบะธ.

### ๐ฏ ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั V2 UI

ะะผะตััะพ:
```
ะะพ ะฟะตัะตััััะฐ: 115 ัะตะบ
ะะพ ะพะฑะฝะพะฒะปะตะฝะธั: 4 ัะตะบ
```

ะะพะปะถะฝะพ ะฑััั:
```
๐ต TOP 200 ะผะพะฝะตั ะฟะพ ะพะฑะพัะพัั
๐ ะะตัะตะบัะพั: โโโโโโโโโโ 8ั | ๐ฐ ะฆะตะฝั: โโโโโโโโโโ 18ั | ๐ ะะพะปะฝัะน: โโโโโโโโโโ 4ะผ 30ั
ะัะพะฑัะฐะฝะพ: 45 ะธะท 200 | ๐ ะะปะฐัั: 12 | โก ะัััััะต: 8 | ๐ ะญะบัััะตะผ: 3

๐ฏ ะะฐะฝะดะธะดะฐัั ะดะปั SHORT ะฟะพะทะธัะธะน
๐ ะะฝะฐะปะธะท: โโโโโโโโโโ 6ั | โก ะขัะธะณะณะตัั: ๐ข ะะบัะธะฒะฝั
ะัะตะณะพ: 30 ะผะพะฝะตั | ะะฐะฑะปัะด: 15 | ะะฝัะตัะตั: 10 | ะะพัะพะฒะฝ: 4 | ๐ด ะะฅะะ: 1
```

### ๐ฏ ะัะปะธ ะพัะธะฑะบะธ ะฟัะพะดะพะปะถะฐัััั

1. ะกะพะฑัะฐัั debug-ะฐััะธะฒ (collect_debug_v2.py)
2. ะัะธัะปะฐัั ะบะพะฝัะพะปัะฝัะน ะฒัะฒะพะด ั [TRACE-V2] ัะพะพะฑัะตะฝะธัะผะธ
3. ะะพะทะผะพะถะฝะพ ะฟะพััะตะฑัะตััั ัะธะฝััะพะฝะธะทะฐัะธั API ะผะตะถะดั main.py ะธ V2 ะผะพะดัะปัะผะธ

---

## ะะะฅะะขะะะขะฃะะ V2 (ะดะปั ะฟะพะฝะธะผะฐะฝะธั)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        main.py                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  MainWindow                                              โ โ
โ  โ  โโโ lbl_full_timer  โโโ V2 ะฟัะพะณัะตัั-ะฑะฐัั TOP200        โ โ
โ  โ  โโโ lbl_cand_timer  โโโ V2 ััะฐัััั ะบะฐะฝะดะธะดะฐัะพะฒ          โ โ
โ  โ  โ                                                       โ โ
โ  โ  โโโ _tick_full_countdown()                             โ โ
โ  โ       โโโ _update_v2_ui()                               โ โ
โ  โ            โโโ update_scan_timers()     โ engine_v2.py  โ โ
โ  โ            โโโ get_scan_state()         โ engine_v2.py  โ โ
โ  โ            โโโ get_header_manager()     โ table_headers_v2.py โ
โ  โ            โ    โโโ update_level_timers()               โ โ
โ  โ            โ    โโโ update_counts()                     โ โ
โ  โ            โ    โโโ update_status_counts()              โ โ
โ  โ            โ    โโโ get_table1_header_text() โ lbl_full_timer โ
โ  โ            โ    โโโ get_table2_header_text() โ lbl_cand_timer โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะะะะขะะะขะซ ะ ะคะะะะซ

- **ะะฐะฑะพัะฐั ะดะธัะตะบัะพัะธั**: C:\Pythone\Log_Short\
- **Python**: C:\Pythone\python.exe (3.12.7)
- **ะะฐะฟััะบ**: _Start.bat โ _Start.py โ main.py

---

## ะะกะขะะะะฏ ะะะะะะะะะ

| ะะฐัะฐ | ะะตะนััะฒะธะต |
|------|----------|
| 02.01.2026 | ะกะพะทะดะฐะฝะธะต V2 ะผะพะดัะปะตะน (ะจะฐะณ 1) |
| 02.01.2026 | ะฃััะฐะฝะพะฒะบะฐ V2 ัะฐะนะปะพะฒ |
| 03.01.2026 | ะะฐััะธะฝะณ auto-short... (ะพัะธะฑะบะฐ โ ะฝะต ัะพั ัะฐะนะป) |
| 03.01.2026 | ะะฑะฝะฐััะถะตะฝะฐ ะผะพะดัะปัะฝะฐั ะฐััะธัะตะบัััะฐ, main.py โ ัะตะฝััะฐะปัะฝัะน ัะฐะนะป |
| 03.01.2026 | ะกะพะทะดะฐะฝ ะฝะพะฒัะน main.py ั V2 ะธะฝัะตะณัะฐัะธะตะน |
| 03.01.2026 | ะัะฟัะฐะฒะปะตะฝะธะต: update_timers โ update_level_timers |
| 03.01.2026 | ะัะฟัะฐะฒะปะตะฝะธะต: scan_state.get() โ scan_state.attribute |

---

## ะะะะะฎะงะะะะ

ะัะพะตะบั V2 UI ะฝะฐ ัะธะฝะฐะปัะฝะพะน ััะฐะดะธะธ ะธะฝัะตะณัะฐัะธะธ. ะัะต ะผะพะดัะปะธ ัััะฐะฝะพะฒะปะตะฝั,
main.py ะฟะตัะตะฟะธัะฐะฝ ั V2 ะฟะพะดะดะตัะถะบะพะน. ะััะฐะปะพัั ัะฑะตะดะธัััั ััะพ ะฟะพัะปะตะดะฝะตะต
ะธัะฟัะฐะฒะปะตะฝะธะต (ะดะพัััะฟ ะบ ะฐััะธะฑััะฐะผ ScanState) ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ.

ะะพัะปะต ััะฟะตัะฝะพะณะพ ะทะฐะฟััะบะฐ V2 UI, ะผะพะถะฝะพ ะฟะตัะตัะพะดะธัั ะบ ะจะฐะณั 3:
- ะะฝัะตะณัะฐัะธั ะฝะพะฒัั ะบะพะปะพะฝะพะบ ัะฐะฑะปะธั (TABLE1_HEADERS, TABLE2_HEADERS)
- ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ะผะตััะธะบ ะฒ CoinRow
- ะะฐััะธัะตะฝะธะต scanner_worker ะดะปั ัะฑะพัะฐ V2 ะดะฐะฝะฝัั
